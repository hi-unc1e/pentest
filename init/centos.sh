## yum
yum install bash-completion -y
yum install net-tools -y
yum groups install Development\ Tools -y
yum install -y vim
yum install -y lsof
# tip: 在 Development Tools 中包含了 kernel-headers , 但是没有 kernel-devel
yum install -y kernel-headers kernel-devel

## firewalld
# 查看状态
systemctl status firewalld
# 开启
systemctl start firewalld
# 关闭
systemctl stop firewalld
# 开机启用
systemctl enable firewalld
# 开机禁用
systemctl disable firewalld



## yum mirror
cp -a /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak
wget -O /etc/yum.repos.d/CentOS-Base.repo https://repo.huaweicloud.com/repository/conf/CentOS-7-reg.repo
yum clean all
yum makecache


## docker
# 1、若您安装过docker，需要先删掉，之后再安装依赖:
sudo yum remove docker docker-common docker-selinux docker-engine
sudo yum install -y yum-utils device-mapper-persistent-data lvm2

# 2、根据版本不同，下载repo文件。
wget -O /etc/yum.repos.d/docker-ce.repo https://repo.huaweicloud.com/docker-ce/linux/centos/docker-ce.repo

# 软件仓库地址替换为：

sudo sed -i 's+download.docker.com+repo.huaweicloud.com/docker-ce+' /etc/yum.repos.d/docker-ce.repo

# 3、更新索引文件并安装

sudo yum makecache fast
sudo yum install docker-ce


## docker 镜像加速
mkdir -p /etc/docker/
sudo cp /etc/docker/daemon.json /etc/docker/daemon.json.bak 
sudo bash -c 'cat << EOF > /etc/docker/daemon.json
{
  "registry-mirrors": [

    "https://06b922119d80105a0f3cc0068b2e35a0.mirror.swr.myhuaweicloud.com/",
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com/",
    "https://tbn9th28.mirror.aliyuncs.com"
  ]
}
EOF'
service docker restart
systemctl daemon-reload
systemctl restart docker
docker info


# python3
rpm -qa|grep python3|xargs rpm -ev --allmatches --nodeps 

yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc  libffi-devel  &
wget https://mirrors.huaweicloud.com/python/3.8.13/Python-3.8.13.tgz -O /tmp/Python-3.8.13.tgz
cd /tmp/ && tar -zxf /tmp/Python-3.8.13.tgz

cd /tmp/Python-3.8.13

./configure &&  make

ln -s /tmp/Python-3.8.13/python /usr/bin/python3 && echo "Python installed OK"
command -v pip3 && echo "pip installed OK"
command -v python3

python3 -m ensurepip --upgrade

## fix SSL error
python3 -m pip install urllib3==1.23 -i https://pypi.tuna.tsinghua.edu.cn/simple
python3 -m pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple

